<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Questionnaire sur le numérique et l'éducation</title>

  <script src="vue.js"></script>
  <script src="marked.min.js"></script>

  <!-- <link rel="stylesheet" href="normalize.css"> -->
  <link rel="stylesheet" href="bootstrap.min.css">

  <link rel="stylesheet" href="questionnaire_PJS1.css">

</head>
<body class="">
  <div id="app" class="row">
    <div class="col-sm-12 col-md-2"  v-bind:class="{ inactive: modalContent != 0 }" >
      <img src="logo_numedu_txt.png" alt="Numérique & Education" style="max-width: 95%;"/>
      <div class="d-none d-md-block">
        <h1>Questionnaire</h1>
      </div>
    </div>
    <div class="col-sm-12 col-md-2"><!--empty --></div>
    <div class="col-sm-12 col-md-7 col-lg-7 "  v-bind:class="{ inactive: modalContent != 0 }" >
      <div id="appContent" class="tablet">

        <!-- INTRODUCTION --------------------->
        <div id="introBox" v-if="introduction_step < 3" class="container d-flex flex-column justify-content-between">
          <div v-if="introduction_step == 0">
            <p>
              Bonjour, je suis Logan, un étudiant en informatique à l'IUT de l'Université de Paris.<br>
              Dans le cadre de nos études, nous devons mener un PJS1. Le PJS1, c'est tout simplement un grand exposé en groupe dont le rapport devra être écrit sur du support numérique tel qu'un site web.
            </p>
            <p>
              Finalement, c'est assez proche des TPEs que l'on peut avoir en classe première générale.
            </p>
          </div>
          <div v-else-if="introduction_step == 1">
            <p>Le sujet de nos recherches porte sur l'utilisation du numérique en classe, manier cet outil au service de l'éducation, tant du côté du prof que du côté des élèves.<br>
              Ce formulaire s'adapte en fonction de vos réponses.
            </p>

            Tout en répondant à nos questions, nous donnons des éléments de nos résultats de recherche, on espère donc que vous apprendrez certains points de notre sujet tout en faisant cela !
          </div>
          <div v-else="">
            <p>Faisons connaissance !<br>
              Quel est votre joli prénom d'usage (si vous tenez à rester anonyme, inventez un prénom) </p>

              <input type="text" class="form-control" v-model="entities.player.name">
          </div>
          <div class="row">
            <a href="#!" class="btn btn-lg col-sm-12 col-lg-7 ml-auto" @click="introduction_nextStep()">{{button_msg[introduction_step]}}</a>
          </div>
        </div>


        <!-- CONTENU DU TCHAT --------------------->
        <div v-else="" id="tchat">
          <div class="history">
            <div class="messageContainer" v-for="msg in bot_conversation">
              <img class="profile_pic" :src="entities[msg.by].profile_pic"></img>
              <div class="msgbody">
                <div class="">
                  {{entities[msg.by].name}}
                </div>
                <div v-if="msg.opensModal">
                  <a href="#!" @click="openModal(msg.msg)">
                    <img src="eyeglasses.png" alt="" class="emoji">
                    Cliquez pour en savoir plus
                  </a>
                </div>
                <div v-else="" v-html="msg.msg">

                </div>
              </div>
            </div>
          </div>

          <div class="input">
            <div class="inputText d-flex" v-if='inputState == "waitingText"'>
              <textarea id="userTextInput" name="name" rows="4" cols="80" class="form-control" ></textarea>
              <button type="button" class="btn btn-primary" @click="sendMessage">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-reply-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M9.079 11.9l4.568-3.281a.719.719 0 0 0 0-1.238L9.079 4.1A.716.716 0 0 0 8 4.719V6c-1.5 0-6 0-7 8 2.5-4.5 7-4 7-4v1.281c0 .56.606.898 1.079.62z"/></svg>
              </button>
            </div>
            <div class="inputBtns" v-else-if='inputState == "waitingChoice"'>
              <div class="description">
                {{choicesContent.choice}}
              </div>
              <div class="buttons_conntainer">
                <button type="button" v-for="(action, text) in choicesContent" @click="sentText = text" v-if="text != 'choice'" class="btn btn-primary btn-sm btn-block">{{text}}</button>
              </div>
            </div>
            <div class="inputContinue" v-else-if='inputState == "waitingContinue"'>
              <button type="button" class="btn btn-primary" @click="sentText = 1">Continuer</button>
            </div>
            <div class="inputDisabled" v-else="">
              <span v-if="isBotTyping"> {{entities["bot"].name}} est en train d'écrire... </span>
            </div>
          </div>
        </div> <!-- tchat-->
      </div> <!-- appcontent -->
    </div> <!-- .tablet-->

    <!-- POPUP --------------------->
    <div v-if="modalContent != 0" class="modal fade show" style="display: block; overflow: auto;">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <img src="eyeglasses.png" alt="" class="emoji">
              Explication
            </h5>
            <button type="button" @click="closeModal" class="close">
              <span>×</span>
            </button>
          </div>
          <div class="modal-body" v-html="modalContent">

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" @click="closeModal">Fermer</button>
          </div>
        </div>
      </div>
    </div> <!-- popup -->

  </div> <!-- app -->


  <script src="questionnaire_PJS1_questions.js" charset="utf-8"></script>
  <script src="questionnaire_PJS1.js" charset="utf-8"></script>
</body>
</html>
